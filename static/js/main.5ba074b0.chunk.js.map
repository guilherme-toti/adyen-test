{"version":3,"sources":["assets/images/weather-loading.svg","assets/images/clouds-unsplash.jpg","assets/images/tickets-loading.svg","assets/images/airplane-unsplash.jpg","assets/images/home-background.png","lib/airports.csv","contexts/AppContext.js","lib/storage.js","components/ScrollToTop.jsx","components/Logo.jsx","api/useApi.js","lib/cities.js","api/models/weather.js","api/weather.js","components/Card.jsx","components/Weather.jsx","api/tickets.js","api/models/tickets.js","components/Tickets.jsx","components/Select.jsx","components/Input.jsx","views/Result.jsx","views/Home.jsx","App.jsx","index.jsx"],"names":["module","exports","AirportsListFile","require","AppContext","createContext","AppContextProvider","children","useState","localStorage","getItem","departureCode","setDepartureCode","airports","setAirports","JSON","parse","options","setOptions","useEffect","Papa","download","header","complete","res","fixedAirports","data","filter","r","city","iata","map","code","name","filterAirports","useCallback","text","filteredAirports","a","toLowerCase","startsWith","setItem","stringify","saveAirportOptions","handleSetDepartureCode","saveDepartureCode","value","useMemo","Provider","useAppContext","useContext","ScrollToTop","location","useLocation","window","scrollTo","Logo","to","className","useApi","request","setData","loading","setLoading","then","CITIES_KEY","CITIES_CODE","getCityKey","getAverage","arr","reduce","b","length","API_KEY","BASE_URL","currentConditions","cityKey","fetch","json","WeatherText","temperature","unit","Temperature","Imperial","Unit","parseInt","Value","forecast5Days","minTemperature","DailyForecasts","d","Minimum","maxTemperature","Maximum","averageTemperature","min","max","Forecast","getWeather","Promise","all","conditions","forecast","Card","title","bgImage","src","alt","Weather","CloudsImage","WeatherLoadingIcon","flights","cityCode","getCityCode","minPrice","deepLink","flyDuration","distance","currency","selectTicket","ticket","price","deep_link","fly_duration","Math","round","forEach","Tickets","catch","AirplaneImage","TicketsLoadingIcon","href","target","rel","Select","defaultValue","history","useHistory","handleChange","e","push","disabled","onChange","xmlns","viewBox","Input","setValue","step","setStep","handleSearch","type","placeholder","onKeyUp","keyCode","onClick","airport","key","Result","match","params","Home","BackgroundImage","App","basename","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5ba074b0.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/weather-loading.50538102.svg\";","module.exports = __webpack_public_path__ + \"static/media/clouds-unsplash.799f5d9d.jpg\";","module.exports = __webpack_public_path__ + \"static/media/tickets-loading.e39d1c3a.svg\";","module.exports = __webpack_public_path__ + \"static/media/airplane-unsplash.49819b21.jpg\";","module.exports = __webpack_public_path__ + \"static/media/home-background.bd6936e4.png\";","module.exports = __webpack_public_path__ + \"static/media/airports.f0211a74.csv\";","import React, {\n  useState,\n  useEffect,\n  useContext,\n  createContext,\n  useMemo,\n  useCallback\n} from 'react'\nimport Papa from 'papaparse'\n\nimport {\n  saveDepartureCode,\n  getDepartureCode,\n  saveAirportOptions,\n  getAirportOptions\n} from '../lib/storage'\n\nconst AirportsListFile = require('../lib/airports.csv')\nconst AppContext = createContext()\n\nconst AppContextProvider = ({ children }) => {\n  const [departureCode, setDepartureCode] = useState(getDepartureCode())\n  const [airports, setAirports] = useState([])\n  const [options, setOptions] = useState(getAirportOptions())\n\n  useEffect(() => {\n    Papa.parse(AirportsListFile, {\n      download: true,\n      header: true,\n      complete: res => {\n        const fixedAirports = res.data\n          .filter(r => !!r.city && r.iata !== '\\\\N')\n          .map(({ iata, name, city }) => ({\n            code: iata,\n            name,\n            city\n          }))\n        setAirports(fixedAirports)\n      }\n    });\n  }, [])\n\n  const filterAirports = useCallback(text => {\n    const filteredAirports = airports.filter(a => a.city.toLowerCase().startsWith(text.toLowerCase()))\n\n    setOptions(filteredAirports)\n    saveAirportOptions(filteredAirports)\n  }, [airports])\n\n  const handleSetDepartureCode = useCallback(code => {\n    saveDepartureCode(code)\n    setDepartureCode(code)\n  }, [setDepartureCode])\n\n  const value = useMemo(() => {\n    return {\n      departureCode,\n      setDepartureCode: handleSetDepartureCode,\n      options,\n      filterAirports\n    }\n  }, [departureCode, options, filterAirports, handleSetDepartureCode])\n\n  return <AppContext.Provider value={value}>{children}</AppContext.Provider>\n}\n\nconst useAppContext = () => useContext(AppContext)\n\nexport { AppContextProvider, useAppContext }\n","const DEPARTURE_STORAGE_KEY = 'departure_code'\nconst OPTIONS_STORAGE_KEY = 'airports_options'\n\nexport const saveDepartureCode = departureCode => localStorage.setItem(DEPARTURE_STORAGE_KEY, departureCode)\n\nexport const getDepartureCode = () => localStorage.getItem(DEPARTURE_STORAGE_KEY)\n\nexport const saveAirportOptions = options => localStorage.setItem(OPTIONS_STORAGE_KEY, JSON.stringify(options))\n\nexport const getAirportOptions = () => JSON.parse(localStorage.getItem(OPTIONS_STORAGE_KEY)) || []\n","import { useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nconst ScrollToTop = () => {\n  const location = useLocation()\n\n  useEffect(() => {\n    window.scrollTo(0, 0)\n  }, [location])\n\n  return null\n}\n\nexport default ScrollToTop\n","import React from 'react'\nimport { Link } from \"react-router-dom\"\n\nconst Logo = () => {\n  return (\n    <Link to=\"/\">\n      <div className=\"animated fadeIn slow\">\n        <h1 className=\"font-avenir-bold text-xl text-blue-900 pt-8 ml-4\">WAW</h1>\n      </div>\n    </Link>\n  )\n}\n\nexport default Logo;\n","import { useState, useEffect } from 'react'\n\nconst useApi = (departureCode, city, request) => {\n  const [data, setData] = useState({})\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    setLoading(true)\n    request({ departureCode, city })\n      .then(res => {\n        setData(res)\n        setLoading(false)\n      })\n  }, [departureCode, city, request])\n\n  return [data, loading]\n}\n\nexport default useApi\n","const CITIES_KEY = {\n  'amsterdam': '249758',\n  'budapest': '187423',\n  'madrid': '308526'\n}\n\nconst CITIES_CODE = {\n  'amsterdam': 'AMS',\n  'budapest': 'BUD',\n  'madrid': 'MAD'\n}\n\nexport const getCityKey = city => CITIES_KEY[city]\n\nexport const getCityCode = city => CITIES_CODE[city]\n","export const Conditions = data => ({\n  text: data.WeatherText,\n  temperature: {\n    unit: data.Temperature.Imperial.Unit,\n    value: parseInt(data.Temperature.Imperial.Value)\n  }\n})\n\nconst getAverage = arr => arr.reduce((a, b) => a + b, 0) / arr.length\n\nexport const Forecast = data => {\n  const minTemperature = data.DailyForecasts.map(d => d.Temperature.Minimum.Value)\n  const maxTemperature = data.DailyForecasts.map(d => d.Temperature.Maximum.Value)\n\n  return {\n    averageTemperature: {\n      min: {\n        value: parseInt(getAverage(minTemperature)),\n        unit: data.DailyForecasts[0].Temperature.Minimum.Unit\n      },\n      max: {\n        value: parseInt(getAverage(maxTemperature)),\n        unit: data.DailyForecasts[0].Temperature.Minimum.Unit\n      }\n    },\n  }\n}\n","import { getCityKey } from '../lib/cities'\n\nimport { Conditions, Forecast } from './models/weather'\n\n// Usually I put it on ENV file or on the build env\n// In this case this is here because it's hosted at GitHub Pages\n// So it won't matter\nconst API_KEY = 'ZAHnEkI9F4Vprf4gvGeYrCYWAvHRBeJS'\nconst BASE_URL = 'https://dataservice.accuweather.com/'\n\nconst currentConditions = city => {\n  const cityKey = getCityKey(city)\n\n  return fetch(`${BASE_URL}currentconditions/v1/${cityKey}?apikey=${API_KEY}`)\n    .then(res => res.json())\n    .then(res => Conditions(res[0]))\n}\n\nconst forecast5Days = city => {\n  const cityKey = getCityKey(city)\n\n  return fetch(`${BASE_URL}forecasts/v1/daily/5day/${cityKey}?apikey=${API_KEY}`)\n    .then(res => res.json())\n    .then(res => Forecast(res))\n}\n\nconst getWeather = ({ city }) => {\n  return Promise.all([\n    currentConditions(city),\n    forecast5Days(city)\n  ])\n    .then(([conditions, forecast]) => ({ conditions, forecast }))\n}\n\n\nexport default getWeather\n","import React from 'react';\n\nconst Card = ({ title, bgImage, children }) => (\n  <div className=\"bg-white animated fadeIn slow\">\n    <div className=\"relative\">\n      <img className=\"w-full object-fill h-56\" src={bgImage} alt={title} />\n      <div className=\"card-title absolute bottom-0 left-0 uppercase text-sm bg-orange-400 text-white text-center py-4 px-20\">{title}</div>\n    </div>\n    <div className=\"text-center py-4 h-64 flex items-center flex-col justify-center\">\n      {children}\n    </div>\n  </div>\n)\n\nexport default Card\n","import React from 'react';\n\nimport { useAppContext } from '../contexts/AppContext'\n\nimport useApi from '../api/useApi'\nimport getWeather from '../api/weather'\n\nimport Card from './Card'\n\nimport WeatherLoadingIcon from '../assets/images/weather-loading.svg'\nimport CloudsImage from '../assets/images/clouds-unsplash.jpg'\n\nconst Weather = ({ city }) => {\n  const { departureCode } = useAppContext()\n  const [data, loading] = useApi(departureCode, city, getWeather)\n\n  return (\n    <Card title=\"Weather\" bgImage={CloudsImage}>\n      {loading ? (\n        <div>\n          <img className=\"m-auto\" src={WeatherLoadingIcon} alt=\"Loading\" />\n          <p className=\"text-xl\">Waiting Thor's response...</p>\n        </div>\n      ) : (\n        <div className=\"animated fadeIn flex items-center flex-col justify-center\">\n          <p className=\"flex-grow text-3xl mb-4\">{data.conditions.text}</p>\n          <p className=\"text-xl mb-2\">Now is {data.conditions.temperature.value}°{data.conditions.temperature.unit}</p>\n          <p className=\"font-avenir-bold text-sm uppercase mt-8 mb-2\">Next 5 days average</p>\n          <p className=\"text-xl mb-2\">Min {data.forecast.averageTemperature.min.value}°{data.forecast.averageTemperature.min.unit}</p>\n          <p className=\"text-xl\">Max {data.forecast.averageTemperature.max.value}°{data.forecast.averageTemperature.max.unit}</p>\n        </div>\n      )}\n    </Card>\n  )\n}\n\nexport default Weather\n","import { getCityCode } from '../lib/cities'\n\nimport { Tickets } from './models/tickets'\n\nconst BASE_URL = 'https://api.skypicker.com/'\n\nexport const flights = ({ departureCode, city }) => {\n  const cityCode = getCityCode(city)\n\n  return fetch(`${BASE_URL}flights?flyFrom=${departureCode}&to=${cityCode}&partner=picky`)\n    .then(res => res.json())\n    .then(res => Tickets(res))\n    .catch(() => ({}))\n}\n","export const Tickets = ({ currency, data }) => {\n  let minPrice, deepLink, flyDuration, distance;\n\n  const selectTicket = ticket => {\n    minPrice = ticket.price\n    deepLink = ticket.deep_link\n    flyDuration = ticket.fly_duration\n    distance = Math.round(ticket.distance)\n  }\n\n  data.forEach(ticket => {\n    if (!minPrice) {\n      selectTicket(ticket)\n    } else if (ticket.price < minPrice) {\n      selectTicket(ticket)\n    }\n  })\n\n  return {\n    currency,\n    minPrice,\n    flyDuration,\n    distance,\n    deepLink,\n  }\n}\n","import React from 'react';\n\nimport { useAppContext } from '../contexts/AppContext'\n\nimport useApi from '../api/useApi'\nimport { flights } from '../api/tickets'\n\nimport Card from './Card'\n\nimport TicketsLoadingIcon from '../assets/images/tickets-loading.svg'\nimport AirplaneImage from '../assets/images/airplane-unsplash.jpg'\n\nconst Tickets = ({ city }) => {\n  const { departureCode } = useAppContext()\n  const [data, loading] = useApi(departureCode, city, flights)\n\n  return (\n    <Card title=\"Tickets\" bgImage={AirplaneImage}>\n      {loading ? (\n        <div>\n          <img className=\"m-auto\" src={TicketsLoadingIcon} alt=\"Loading\" />\n          <p className=\"text-xl\">Haggling the lowest price...</p>\n        </div>\n      ) : (\n        <div className=\"flex items-center flex-col justify-center animated fadeIn px-8\">\n          {data.minPrice ? (\n            <>\n              <p className=\"flex-grow text-3xl mb-4\">{data.currency} {data.minPrice}</p>\n              <p className=\"text-xl mb-2\">Total duration is {data.flyDuration}</p>\n              <p className=\"text-xl mb-10\">Total distance is {data.distance}km</p>\n              <a\n                className=\"bg-blue-500 hover:bg-blue-700 uppercase text-sm text-white py-4 px-6 rounded\"\n                href={data.deepLink}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                Buy this ticket\n              </a>\n            </>\n          ) : (\n            <>\n              <p className=\"flex-grow text-3xl mb-4\">Sorry :-(</p>\n              <p className=\"text-md mb-2\">The selected aiport can not fly to this location.</p>\n              <p className=\"text-md mb-2\">Please try another airport</p>\n            </>\n          )}\n        </div>\n      )}\n    </Card>\n  )\n}\n\nexport default Tickets\n","import React, { useCallback } from 'react'\nimport { useHistory } from \"react-router-dom\"\n\nimport { useAppContext } from '../contexts/AppContext'\n\nconst Select = ({ defaultValue }) => {\n  const { departureCode } = useAppContext()\n\n  let history = useHistory()\n  const handleChange = useCallback((e) => {\n    const city = e.target.value\n    if (city && departureCode) {\n      history.push(`/result/${city}`)\n    }\n  }, [history, departureCode])\n\n  return (\n    <div className=\"relative h-full\">\n      <select\n        disabled={!departureCode}\n        defaultValue={defaultValue}\n        onChange={handleChange}\n        className={`block ${departureCode && 'cursor-pointer'} appearance-none h-full w-full bg-gray-200 border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500`}\n      >\n        <option value=\"\">{!departureCode ? 'Waiting your location...' : 'Choose a place'}</option>\n        <option value=\"amsterdam\">Amsterdam</option>\n        <option value=\"madrid\">Madrid</option>\n        <option value=\"budapest\">Budapest</option>\n      </select>\n      <div className=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\">\n        <svg className=\"fill-current h-4 w-4\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\">\n          <path d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\"/>\n        </svg>\n      </div>\n    </div>\n  )\n}\n\nexport default Select;\n","import React, { useState, useEffect, useCallback } from 'react'\n\nimport { useAppContext } from '../contexts/AppContext'\n\nconst Input = () => {\n  const {\n    departureCode,\n    setDepartureCode,\n    options,\n    filterAirports\n  } = useAppContext()\n  const [value, setValue] = useState('')\n  const [step, setStep] = useState(departureCode ? 'select' : 'input')\n\n  const handleSearch = useCallback(() => {\n    if (!value) {\n      return\n    }\n\n    filterAirports(value)\n  }, [value, filterAirports])\n\n  useEffect(() => {\n    if (options.length > 0) {\n      setStep('select')\n    }\n  }, [options])\n\n  return (\n    <div className=\"flex items-center w-full bg-gray-200 border border-gray-200 rounded leading-tight py-2\">\n      {step === 'input' ? (\n        <>\n          <input\n            type=\"text\"\n            placeholder=\"e.g: Sao Paulo\"\n            value={value}\n            onKeyUp={e => e.keyCode === 13 && handleSearch()}\n            onChange={e => setValue(e.target.value)}\n            className=\"appearance-none bg-transparent block w-full text-gray-700 py-3 px-2 leading-tight\"\n          />\n          <button\n            type=\"button\"\n            onClick={handleSearch}\n            className=\"flex-shrink-0 border-transparent border-4 text-gray-700 hover:text-orange-400 text-sm py-1 px-2 rounded\"\n          >\n            <svg className=\"fill-current h-4 w-4\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\">\n              <path d=\"M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42 1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12z\"/>\n            </svg>\n          </button>\n        </>\n      ) : (\n        <>\n          <div>\n            <select\n              value={departureCode || ''}\n              onChange={e => setDepartureCode(e.target.value)}\n              className=\"block appearance-none bg-transparent w-full text-gray-700 py-3 px-2 leading-tight\"\n            >\n              <option value=\"\">Choose an airport</option>\n              {options.map(airport => (\n                <option\n                  key={airport.code}\n                  value={airport.code}\n                >\n                  {`(${airport.code}) ${airport.name}`}\n                </option>\n              ))}\n            </select>\n          </div>\n          <button\n            type=\"button\"\n            onClick={() => setStep('input')}\n            className=\"flex-shrink-0 border-transparent border-4 text-gray-700 hover:text-orange-400 text-sm py-1 px-2 rounded\"\n          >\n            <svg className=\"fill-current h-4 w-4\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\">\n              <path d=\"M7.05 9.293L6.343 10 12 15.657l1.414-1.414L9.172 10l4.242-4.243L12 4.343z\"/>\n            </svg>\n          </button>\n        </>\n      )}\n\n    </div>\n  )\n}\n\nexport default Input;\n","import React from 'react';\nimport { useHistory } from \"react-router-dom\"\n\nimport { useAppContext } from '../contexts/AppContext'\n\nimport Logo from '../components/Logo'\nimport Weather from '../components/Weather'\nimport Tickets from '../components/Tickets'\nimport Select from '../components/Select'\nimport Input from '../components/Input'\n\nconst Result = ({\n  match: {\n    params: {\n      city\n    }\n  },\n}) => {\n  const { departureCode } = useAppContext()\n  let history = useHistory()\n\n  if (!departureCode) {\n    history.push('/')\n  }\n\n  return (\n    <div className=\"h-screen\">\n      <Logo />\n      <div className=\"flex flex-col items-center mt-10\">\n        <h1 className=\"text-4xl mb-10 uppercase font-avenir-bold animated fadeInDown slow\">{city}</h1>\n        {departureCode && (\n          <>\n            <div className=\"grid grold-cols-1 md:grid-cols-2 gap-12\">\n              <Weather city={city} />\n              <Tickets city={city} />\n            </div>\n            <div className=\"mb-8 animated fadeInLeft delay-1s\">\n              <p className=\"mt-24 text-xl text-center mb-4\">Want to try another place?</p>\n              <div className=\"grid grold-cols-1 md:grid-cols-2 gap-12\">\n                <div className=\"w-64\">\n                  <Input />\n                </div>\n                <div className=\"w-64\">\n                  <Select defaultValue={city} />\n                </div>\n              </div>\n            </div>\n          </>\n        )}\n      </div>\n    </div>\n  )\n}\n\nexport default Result;\n","import React from 'react'\n\nimport BackgroundImage from '../assets/images/home-background.png'\nimport Logo from '../components/Logo'\nimport Select from '../components/Select'\nimport Input from '../components/Input'\n\nconst Home = () => {\n  return (\n    <div className=\"h-screen grid sm:grid-cols-1 md:grid-cols-1 lg:grid-cols-2\">\n      <div className=\"h-screen flex flex-col\">\n        <Logo />\n        <div className=\"flex flex-col h-full justify-between md:pt-40 md:pb-20 py-10 px-5\">\n          <div>\n            <h1 className=\"text-4xl animated fadeInLeft\">Work <span className=\"text-orange-400\">Around the World</span></h1>\n            <h2 className=\"text-lg animated fadeInLeft delay-1s\">If you want to relocate, this is the first step</h2>\n          </div>\n          <div className=\"w-full sm:w-2/3 py-10 md:py-0 animated fadeIn delay-2s\">\n            <div className=\"animated pulse delay-3s\">\n              <label className=\"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2\">\n                I am in\n              </label>\n              <Input />\n            </div>\n            <div className=\"animated pulse delay-4s mt-10\">\n              <label className=\"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2\">\n                I am interested in\n              </label>\n              <Select />\n            </div>\n          </div>\n\n          <p className=\"animated fadeInLeft delay-2s\">\n            Make sure to perfect match <br />\n            your budget and <br />\n            your weather preferences\n          </p>\n        </div>\n      </div>\n      <div className=\"hidden lg:block\">\n        <img className=\"w-full h-screen animated fadeIn slow delay-2s\" src={BackgroundImage} alt=\"Work around the world\" />\n      </div>\n    </div>\n  );\n}\n\nexport default Home;\n","import React from 'react'\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n} from \"react-router-dom\"\n\nimport { AppContextProvider } from './contexts/AppContext'\n\nimport ScrollToTop from './components/ScrollToTop'\nimport Result from './views/Result'\nimport Home from './views/Home'\n\nconst App = () => (\n  <AppContextProvider>\n    <Router basename=\"/\">\n      <ScrollToTop />\n      <Switch>\n        <Route path=\"/result/:city\" component={Result} />\n        <Route path=\"/\" component={Home} />\n      </Switch>\n    </Router>\n  </AppContextProvider>\n)\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './assets/styles/tailwind.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}