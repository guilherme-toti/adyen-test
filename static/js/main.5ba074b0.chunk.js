(this["webpackJsonpadyen-test"]=this["webpackJsonpadyen-test"]||[]).push([[0],{19:function(e,t,a){e.exports=a.p+"static/media/weather-loading.50538102.svg"},20:function(e,t,a){e.exports=a.p+"static/media/clouds-unsplash.799f5d9d.jpg"},21:function(e,t,a){e.exports=a.p+"static/media/tickets-loading.e39d1c3a.svg"},22:function(e,t,a){e.exports=a.p+"static/media/airplane-unsplash.49819b21.jpg"},23:function(e,t,a){e.exports=a.p+"static/media/home-background.bd6936e4.png"},24:function(e,t,a){e.exports=a(36)},29:function(e,t,a){},30:function(e,t,a){e.exports=a.p+"static/media/airports.f0211a74.csv"},36:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),l=a.n(c),s=(a(29),a(7)),o=a(6),i=a(2),m=a(16),u=a.n(m),d=a(30),p=Object(n.createContext)(),f=function(e){var t=e.children,a=Object(n.useState)(localStorage.getItem("departure_code")),c=Object(i.a)(a,2),l=c[0],s=c[1],o=Object(n.useState)([]),m=Object(i.a)(o,2),f=m[0],g=m[1],b=Object(n.useState)(JSON.parse(localStorage.getItem("airports_options"))||[]),x=Object(i.a)(b,2),E=x[0],v=x[1];Object(n.useEffect)((function(){u.a.parse(d,{download:!0,header:!0,complete:function(e){var t=e.data.filter((function(e){return!!e.city&&"\\N"!==e.iata})).map((function(e){return{code:e.iata,name:e.name,city:e.city}}));g(t)}})}),[]);var h=Object(n.useCallback)((function(e){var t=f.filter((function(t){return t.city.toLowerCase().startsWith(e.toLowerCase())}));v(t),function(e){localStorage.setItem("airports_options",JSON.stringify(e))}(t)}),[f]),y=Object(n.useCallback)((function(e){!function(e){localStorage.setItem("departure_code",e)}(e),s(e)}),[s]),N=Object(n.useMemo)((function(){return{departureCode:l,setDepartureCode:y,options:E,filterAirports:h}}),[l,E,h,y]);return r.a.createElement(p.Provider,{value:N},t)},g=function(){return Object(n.useContext)(p)},b=function(){var e=Object(o.g)();return Object(n.useEffect)((function(){window.scrollTo(0,0)}),[e]),null},x=function(){return r.a.createElement(s.b,{to:"/"},r.a.createElement("div",{className:"animated fadeIn slow"},r.a.createElement("h1",{className:"font-avenir-bold text-xl text-blue-900 pt-8 ml-4"},"WAW")))},E=function(e,t,a){var r=Object(n.useState)({}),c=Object(i.a)(r,2),l=c[0],s=c[1],o=Object(n.useState)(!0),m=Object(i.a)(o,2),u=m[0],d=m[1];return Object(n.useEffect)((function(){d(!0),a({departureCode:e,city:t}).then((function(e){s(e),d(!1)}))}),[e,t,a]),[l,u]},v={amsterdam:"249758",budapest:"187423",madrid:"308526"},h={amsterdam:"AMS",budapest:"BUD",madrid:"MAD"},y=function(e){return v[e]},N=function(e){return e.reduce((function(e,t){return e+t}),0)/e.length},w="ZAHnEkI9F4Vprf4gvGeYrCYWAvHRBeJS",j="https://dataservice.accuweather.com/",k=function(e){var t=y(e);return fetch("".concat(j,"currentconditions/v1/").concat(t,"?apikey=").concat(w)).then((function(e){return e.json()})).then((function(e){return{text:(t=e[0]).WeatherText,temperature:{unit:t.Temperature.Imperial.Unit,value:parseInt(t.Temperature.Imperial.Value)}};var t}))},O=function(e){var t=y(e);return fetch("".concat(j,"forecasts/v1/daily/5day/").concat(t,"?apikey=").concat(w)).then((function(e){return e.json()})).then((function(e){return function(e){var t=e.DailyForecasts.map((function(e){return e.Temperature.Minimum.Value})),a=e.DailyForecasts.map((function(e){return e.Temperature.Maximum.Value}));return{averageTemperature:{min:{value:parseInt(N(t)),unit:e.DailyForecasts[0].Temperature.Minimum.Unit},max:{value:parseInt(N(a)),unit:e.DailyForecasts[0].Temperature.Minimum.Unit}}}}(e)}))},I=function(e){var t=e.city;return Promise.all([k(t),O(t)]).then((function(e){var t=Object(i.a)(e,2);return{conditions:t[0],forecast:t[1]}}))},C=function(e){var t=e.title,a=e.bgImage,n=e.children;return r.a.createElement("div",{className:"bg-white animated fadeIn slow"},r.a.createElement("div",{className:"relative"},r.a.createElement("img",{className:"w-full object-fill h-56",src:a,alt:t}),r.a.createElement("div",{className:"card-title absolute bottom-0 left-0 uppercase text-sm bg-orange-400 text-white text-center py-4 px-20"},t)),r.a.createElement("div",{className:"text-center py-4 h-64 flex items-center flex-col justify-center"},n))},S=a(19),T=a.n(S),M=a(20),L=a.n(M),W=function(e){var t=e.city,a=g().departureCode,n=E(a,t,I),c=Object(i.a)(n,2),l=c[0],s=c[1];return r.a.createElement(C,{title:"Weather",bgImage:L.a},s?r.a.createElement("div",null,r.a.createElement("img",{className:"m-auto",src:T.a,alt:"Loading"}),r.a.createElement("p",{className:"text-xl"},"Waiting Thor's response...")):r.a.createElement("div",{className:"animated fadeIn flex items-center flex-col justify-center"},r.a.createElement("p",{className:"flex-grow text-3xl mb-4"},l.conditions.text),r.a.createElement("p",{className:"text-xl mb-2"},"Now is ",l.conditions.temperature.value,"\xb0",l.conditions.temperature.unit),r.a.createElement("p",{className:"font-avenir-bold text-sm uppercase mt-8 mb-2"},"Next 5 days average"),r.a.createElement("p",{className:"text-xl mb-2"},"Min ",l.forecast.averageTemperature.min.value,"\xb0",l.forecast.averageTemperature.min.unit),r.a.createElement("p",{className:"text-xl"},"Max ",l.forecast.averageTemperature.max.value,"\xb0",l.forecast.averageTemperature.max.unit)))},D=function(e){var t=e.departureCode,a=function(e){return h[e]}(e.city);return fetch("".concat("https://api.skypicker.com/","flights?flyFrom=").concat(t,"&to=").concat(a,"&partner=picky")).then((function(e){return e.json()})).then((function(e){return function(e){var t,a,n,r,c=e.currency,l=e.data,s=function(e){t=e.price,a=e.deep_link,n=e.fly_duration,r=Math.round(e.distance)};return l.forEach((function(e){t?e.price<t&&s(e):s(e)})),{currency:c,minPrice:t,flyDuration:n,distance:r,deepLink:a}}(e)})).catch((function(){return{}}))},F=a(21),A=a.n(F),B=a(22),P=a.n(B),V=function(e){var t=e.city,a=g().departureCode,n=E(a,t,D),c=Object(i.a)(n,2),l=c[0],s=c[1];return r.a.createElement(C,{title:"Tickets",bgImage:P.a},s?r.a.createElement("div",null,r.a.createElement("img",{className:"m-auto",src:A.a,alt:"Loading"}),r.a.createElement("p",{className:"text-xl"},"Haggling the lowest price...")):r.a.createElement("div",{className:"flex items-center flex-col justify-center animated fadeIn px-8"},l.minPrice?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"flex-grow text-3xl mb-4"},l.currency," ",l.minPrice),r.a.createElement("p",{className:"text-xl mb-2"},"Total duration is ",l.flyDuration),r.a.createElement("p",{className:"text-xl mb-10"},"Total distance is ",l.distance,"km"),r.a.createElement("a",{className:"bg-blue-500 hover:bg-blue-700 uppercase text-sm text-white py-4 px-6 rounded",href:l.deepLink,target:"_blank",rel:"noopener noreferrer"},"Buy this ticket")):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"flex-grow text-3xl mb-4"},"Sorry :-("),r.a.createElement("p",{className:"text-md mb-2"},"The selected aiport can not fly to this location."),r.a.createElement("p",{className:"text-md mb-2"},"Please try another airport"))))},_=function(e){var t=e.defaultValue,a=g().departureCode,c=Object(o.f)(),l=Object(n.useCallback)((function(e){var t=e.target.value;t&&a&&c.push("/result/".concat(t))}),[c,a]);return r.a.createElement("div",{className:"relative h-full"},r.a.createElement("select",{disabled:!a,defaultValue:t,onChange:l,className:"block ".concat(a&&"cursor-pointer"," appearance-none h-full w-full bg-gray-200 border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500")},r.a.createElement("option",{value:""},a?"Choose a place":"Waiting your location..."),r.a.createElement("option",{value:"amsterdam"},"Amsterdam"),r.a.createElement("option",{value:"madrid"},"Madrid"),r.a.createElement("option",{value:"budapest"},"Budapest")),r.a.createElement("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},r.a.createElement("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},r.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"}))))},J=function(){var e=g(),t=e.departureCode,a=e.setDepartureCode,c=e.options,l=e.filterAirports,s=Object(n.useState)(""),o=Object(i.a)(s,2),m=o[0],u=o[1],d=Object(n.useState)(t?"select":"input"),p=Object(i.a)(d,2),f=p[0],b=p[1],x=Object(n.useCallback)((function(){m&&l(m)}),[m,l]);return Object(n.useEffect)((function(){c.length>0&&b("select")}),[c]),r.a.createElement("div",{className:"flex items-center w-full bg-gray-200 border border-gray-200 rounded leading-tight py-2"},"input"===f?r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"text",placeholder:"e.g: Sao Paulo",value:m,onKeyUp:function(e){return 13===e.keyCode&&x()},onChange:function(e){return u(e.target.value)},className:"appearance-none bg-transparent block w-full text-gray-700 py-3 px-2 leading-tight"}),r.a.createElement("button",{type:"button",onClick:x,className:"flex-shrink-0 border-transparent border-4 text-gray-700 hover:text-orange-400 text-sm py-1 px-2 rounded"},r.a.createElement("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},r.a.createElement("path",{d:"M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42 1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12z"})))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("select",{value:t||"",onChange:function(e){return a(e.target.value)},className:"block appearance-none bg-transparent w-full text-gray-700 py-3 px-2 leading-tight"},r.a.createElement("option",{value:""},"Choose an airport"),c.map((function(e){return r.a.createElement("option",{key:e.code,value:e.code},"(".concat(e.code,") ").concat(e.name))})))),r.a.createElement("button",{type:"button",onClick:function(){return b("input")},className:"flex-shrink-0 border-transparent border-4 text-gray-700 hover:text-orange-400 text-sm py-1 px-2 rounded"},r.a.createElement("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},r.a.createElement("path",{d:"M7.05 9.293L6.343 10 12 15.657l1.414-1.414L9.172 10l4.242-4.243L12 4.343z"})))))},U=function(e){var t=e.match.params.city,a=g().departureCode,n=Object(o.f)();return a||n.push("/"),r.a.createElement("div",{className:"h-screen"},r.a.createElement(x,null),r.a.createElement("div",{className:"flex flex-col items-center mt-10"},r.a.createElement("h1",{className:"text-4xl mb-10 uppercase font-avenir-bold animated fadeInDown slow"},t),a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"grid grold-cols-1 md:grid-cols-2 gap-12"},r.a.createElement(W,{city:t}),r.a.createElement(V,{city:t})),r.a.createElement("div",{className:"mb-8 animated fadeInLeft delay-1s"},r.a.createElement("p",{className:"mt-24 text-xl text-center mb-4"},"Want to try another place?"),r.a.createElement("div",{className:"grid grold-cols-1 md:grid-cols-2 gap-12"},r.a.createElement("div",{className:"w-64"},r.a.createElement(J,null)),r.a.createElement("div",{className:"w-64"},r.a.createElement(_,{defaultValue:t})))))))},z=a(23),H=a.n(z),Y=function(){return r.a.createElement("div",{className:"h-screen grid sm:grid-cols-1 md:grid-cols-1 lg:grid-cols-2"},r.a.createElement("div",{className:"h-screen flex flex-col"},r.a.createElement(x,null),r.a.createElement("div",{className:"flex flex-col h-full justify-between md:pt-40 md:pb-20 py-10 px-5"},r.a.createElement("div",null,r.a.createElement("h1",{className:"text-4xl animated fadeInLeft"},"Work ",r.a.createElement("span",{className:"text-orange-400"},"Around the World")),r.a.createElement("h2",{className:"text-lg animated fadeInLeft delay-1s"},"If you want to relocate, this is the first step")),r.a.createElement("div",{className:"w-full sm:w-2/3 py-10 md:py-0 animated fadeIn delay-2s"},r.a.createElement("div",{className:"animated pulse delay-3s"},r.a.createElement("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"},"I am in"),r.a.createElement(J,null)),r.a.createElement("div",{className:"animated pulse delay-4s mt-10"},r.a.createElement("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"},"I am interested in"),r.a.createElement(_,null))),r.a.createElement("p",{className:"animated fadeInLeft delay-2s"},"Make sure to perfect match ",r.a.createElement("br",null),"your budget and ",r.a.createElement("br",null),"your weather preferences"))),r.a.createElement("div",{className:"hidden lg:block"},r.a.createElement("img",{className:"w-full h-screen animated fadeIn slow delay-2s",src:H.a,alt:"Work around the world"})))},G=function(){return r.a.createElement(f,null,r.a.createElement(s.a,{basename:"/"},r.a.createElement(b,null),r.a.createElement(o.c,null,r.a.createElement(o.a,{path:"/result/:city",component:U}),r.a.createElement(o.a,{path:"/",component:Y}))))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(G,null)),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.5ba074b0.chunk.js.map